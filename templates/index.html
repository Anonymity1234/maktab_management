<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hifdh Tracking</title>
    <style>
        body {
            font-family: Arial;
        }

        /* Style the tab */
        .tab {
            overflow: hidden;
            border: 1px #ccc;
            background-color: #f1f1f1;

        }

        /* Style the buttons inside the tab */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
        }

        /* Change background color of buttons on hover */
        .tab button:hover {
            background-color: #ddd;
        }

        /* Create an active/current tablink class */
        .tab button.active {
            background-color: #ccc;
        }

        /* Style the tab content */
        .tabcontent {
            display: none;
            padding: 6px 12px;
            border: 1px #ccc;
            -webkit-animation: fadeEffect 4s;
            animation: fadeEffect 4s;

        }

        /* Fade in tabs */
        @-webkit-keyframes fadeEffect {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes fadeEffect {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .tableData {
            font-family: Arial, Helvetica, sans-serif;
            border-collapse: collapse;
            width: 100%;
        }

        .tableData td, .tableData th {
            border: 1px #ddd;
            padding: 8px;
        }

        .tableData tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        .tableData tr:hover {
            background-color: #ddd;
        }

        .tableData th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;
            background-color: #04AA6D;
            color: white;
        }

        .tablinks {
            text-align: center;
        }

        /* Button style */
        .button-56 {
            align-items: center;
            background-color: #fee6e3;
            border: 2px solid #111;
            border-radius: 8px;
            box-sizing: border-box;
            color: #111;
            cursor: pointer;
            display: flex;
            font-family: Inter, sans-serif;
            font-size: 16px;
            height: 48px;
            justify-content: center;
            line-height: 24px;
            max-width: 100%;
            padding: 0 25px;
            position: relative;
            text-align: center;
            text-decoration: none;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation;
            margin-left: 100px;
        {#margin-right: auto;#} margin-top: 10px;
        }

        .button-56:after {
            background-color: #111;
            border-radius: 8px;
            content: "";
            display: block;
            height: 48px;
            left: 0;
            width: 100%;
            position: absolute;
            top: -2px;
            transform: translate(8px, 8px);
            transition: transform .2s ease-out;
            z-index: -1;
        }

        .button-56:hover:after {
            transform: translate(0, 0);
        }

        .button-56:active {
            background-color: #ffdeda;
            outline: 0;
        }

        .button-56:hover {
            outline: 0;
        }

        .button-container {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @media (min-width: 768px) {
            .button-56 {
                padding: 0 40px;
            }
        }

        .tgl {
            display: none;
        }

        .tgl,
        .tgl:after,
        .tgl:before,
        .tgl *,
        .tgl *:after,
        .tgl *:before,
        .tgl + .tgl-btn {
            box-sizing: border-box;
        }

        .tgl::selection {
            background: none;
        }

        .tgl + .tgl-btn {
            outline: 0;
            display: block;
            width: 4em;
            height: 2em;
            position: relative;
            cursor: pointer;
            user-select: none;
        }

        .tgl + .tgl-btn:after,
        .tgl + .tgl-btn:before {
            position: relative;
            display: block;
            content: "";
            width: 50%;
            height: 100%;
        }

        .tgl + .tgl-btn:after {
            left: 0;
        }

        .tgl + .tgl-btn:before {
            display: none;
        }

        .tgl:checked + .tgl-btn:after {
            left: 50%;
        }

        .tgl-ios + .tgl-btn {
            background: #fbfbfb;
            border-radius: 2em;
            padding: 2px;
            transition: all 0.4s ease;
            border: 1px solid #e8eae9;
        }

        .tgl-ios + .tgl-btn:after {
            border-radius: 2em;
            background: #fbfbfb;
            transition: left 0.3s cubic-bezier(0.175, 0.885, 0.320, 1.275),
            padding 0.3s ease,
            margin 0.3s ease;
            box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1),
            0 4px 0 rgba(0, 0, 0, 0.08);
        }

        .tgl-ios + .tgl-btn:hover:after {
            will-change: padding;
        }

        .tgl-ios:active + .tgl-btn {
            box-shadow: inset 0 0 0 2em #e8eae9;
        }

        .tgl-ios:active + .tgl-btn:after {
            padding-right: 0.8em;
        }

        .tgl-ios:checked + .tgl-btn {
            background: #86d993;
        }

        .tgl-ios:checked + .tgl-btn:active {
            box-shadow: none;
        }

        .tgl-ios:checked + .tgl-btn:active:after {
            margin-left: -0.8em;
        }

    </style>
</head>
<body>

<div>
    <h4 style="text-align: center">Student Record</h4>

    <div class="tab">
        <button class="tablinks" onclick="hifdhType(event, 'Sabaq')">Sabaq</button>
        <button class="tablinks" onclick="hifdhType(event, 'Sabaq-Para')">Sabaq-Para</button>
        <button class="tablinks" onclick="hifdhType(event, 'Daur')">Daur</button>
        <button class="tablinks" onclick="hifdhType(event, 'Nazra')">Nazra</button>
        <button class="tablinks" onclick="hifdhType(event, 'Home-work')">Homework</button>
    </div>

    <div id="Sabaq" class="tabcontent">
        <form action="#" method="post" id="submission-form1">
            {% csrf_token %}
            <table id="tableData0" class="tableData" style="cellpadding:2">
                <tr>
                    <td><b>Student Name</b></td>
                    <td><b>Juz</b></td>
                    <td><b>Q-Start</b></td>
                    <td><b>Q-End</b></td>
                    <td><b>Surah</b></td>
                    <td><b>Ayah Start</b></td>
                    <td><b>Ayah End</b></td>
                    <td><b>Type</b></td>
                    <td><b>Mistakes</b></td>
                    <td><b>Stuck</b></td>
                </tr>
            </table>
            <div class="button-container">
                <h4 style="margin-right: 10px">Juz</h4>
                <input id="cb1" class="tgl tgl-ios" type="checkbox">
                <label class="tgl-btn" for="cb1"></label>
                <button class="button-56" type="submit">Submit</button>
                <button class="button-56" type="button">Reset</button>
            </div>
        </form>
    </div>


    <div id="Sabaq-Para" class="tabcontent">
        <form action="" method="post" id="submission-form2">
            {% csrf_token %}
            <table id="tableData1" class="tableData" style="cellpadding:2">
                <tr>
                    <td><b>Student Name</b></td>
                    <td><b>Juz</b></td>
                    <td><b>Q-Start</b></td>
                    <td><b>Q-End</b></td>
                    <td><b>Surah</b></td>
                    <td><b>Ayah Start</b></td>
                    <td><b>Ayah End</b></td>
                    <td><b>Type</b></td>
                    <td><b>Mistakes</b></td>
                    <td><b>Stuck</b></td>
                </tr>
            </table>
            <div class="button-container">
                <h4 style="margin-right: 10px">Juz</h4>
                <input id="cb2" class="tgl tgl-ios" type="checkbox">
                <label class="tgl-btn" for="cb2"></label>
                <button class="button-56" type="submit">Submit</button>
                <button class="button-56" type="button">Reset</button>
            </div>
        </form>
    </div>

    <div id="Daur" class="tabcontent">
        <form action="#" method="post" id="submission-form3">
            {% csrf_token %}
            <table id="tableData2" class="tableData" style="cellpadding:2">
                <tr>
                    <td><b>Student Name</b></td>
                    <td><b>Juz</b></td>
                    <td><b>Q-Start</b></td>
                    <td><b>Q-End</b></td>
                    <td><b>Surah</b></td>
                    <td><b>Ayah Start</b></td>
                    <td><b>Ayah End</b></td>
                    <td><b>Type</b></td>
                    <td><b>Mistakes</b></td>
                    <td><b>Stuck</b></td>
                </tr>
            </table>
            <div class="button-container">
                <h4 style="margin-right: 10px">Juz</h4>
                <input id="cb3" class="tgl tgl-ios" type="checkbox">
                <label class="tgl-btn" for="cb3"></label>
                <button class="button-56" type="submit">Submit</button>
                <button class="button-56" type="button">Reset</button>
            </div>
        </form>
    </div>


</div>

<script>

    let generatedTables = {
        'Sabaq': false,
        'Sabaq-Para': false,
        'Daur': false
    };

    function tableGenerator(type1) {

        if (generatedTables[type1]) {
            return;
        }

        let toggleChangeToJuz = document.createElement('button');
        toggleChangeToJuz.innerHTML = 'Change to Juz';

        // q: how to display this toggleChangeToJuz button?
        // a: add it to the tableData0, tableData1, tableData2
        // q: how to add it to the tableData0, tableData1, tableData2?
        // a: use appendChild() method
        // q: give me an example
        // a: tableData0.appendChild(toggleChangeToJuz);
        // q: where should I put that code?
        // a: put it in the if statement below

        let table;
        if (type1 === 'Sabaq') {
            table = document.getElementById("tableData0");
            // tableData0.insertBefore(toggleChangeToJuz, tableData0.firstChild);
            // q: okay, I added it to the tableData0, but I want to add it at the top, not bottom.
            // a: use insertBefore() method
            // q: give me an example
            // a: tableData0.insertBefore(toggleChangeToJuz, tableData0.firstChild);

        } else if (type1 === 'Sabaq-Para') {
            table = document.getElementById("tableData1");
        } else if (type1 === 'Daur') {
            table = document.getElementById("tableData2");
        }

        let studentNames = ['Aaraiz Khan', 'Abdul Aziz', 'Abdullah Tariq', 'Adeel Siddiqui', 'Ali Awsaf Tayeeb', 'Anas Malik', 'Anas Sher', 'Ayesha Mukry', 'Muhammad Mukry', 'Mustafa Mukry', 'Shahwaiz Khan', 'Syed Muhammad Affan Karim', 'Syed Muhammad Hassan Karim', 'Umair Asif'];

        let studentNames2 = ['Abdul Muheet Sabzwari', 'Ahmed Amin', 'Ahyan Mohammad', 'Ali Hasan Harith', 'Ayan Aftab', 'Ayan Jalal', 'Ibrahim Kareem', 'Maaz Khan', 'Mohammad Omar Mirza', 'Musab Khan', 'Rayyan Adil Siddiqui', 'Usman Behaqi', 'Yahya Kareem', 'Zaid Farid', 'Zara Adil Siddiqui'];

        let surahNames = ['', '1- الفاتحة', '2- البقرة', '3- آل عمران', '4- النساء', '5- المائدة', '6- الأنعام', '7- الأعراف', '8- الأنفال', '9- التوبة', '10- يونس', '11- هود', '12- يوسف', '13- الرعد', '14- إبراهيم', '15- الحجر', '16- النحل', '17- الإسراء', '18- الكهف', '19- مريم', '20- طه', '21- الأنبياء', '22- الحج', '23- المؤمنون', '24- النور', '25- الفرقان', '26- الشعراء', '27- النمل', '28- القصص', '29- العنكبوت', '30- الروم', '31- لقمان', '32- السجدة', '33- الأحزاب', '34- سبأ', '35- فاطر', '36- يس', '37- الصافات', '38- ص', '39- الزمر', '40- غافر', '41- فصلت', '42- الشورى', '43- الزخرف', '44- الدخان', '45- الجاثية', '46- الأحقاف', '47- محمد', '48- الفتح', '49- الحجرات', '50- ق', '51- الذاريات', '52- الطور', '53- النجم', '54- القمر', '55- الرحمن', '56- الواقعة', '57- الحديد', '58- المجادلة', '59- الحشر', '60- الممتحنة', '61- الصف', '62- الجمعة', '63- المنافقون', '64- التغابن', '65- الطلاق', '66- التحريم', '67- الملك', '68- القلم', '69- الحاقة', '70- المعارج', '71- نوح', '72- الجن', '73- المزمل', '74- المدثر', '75- القيامة', '76- الإنسان', '77- المرسلات', '78- النبأ', '79- النازعات', '80- عبس', '81- التكوير', '82- الإنفطار', '83- المطففين', '84- الانشقاق', '85- البروج', '86- الطارق', '87- الأعلى', '88- الغاشية', '89- الفجر', '90- البلد', '91- الشمس', '92- الليل', '93- الضحى', '94- الشرح', '95- التين', '96- العلق', '97- القدر', '98- البينة', '99- الزلزلة', '100- العاديات', '101- القارعة', '102- التكاثر', '103- العصر', '104- الهمزة', '105- الفيل', '106- قريش', '107- الماعون', '108- الكوثر', '109- الكافرون', '110- النصر', '111- المسد', '112- الإخلاص', '113- الفلق', '114- الناس'
        ];


        for (let i = 0; i < studentNames.length; i++) {
            let row = table.insertRow();
            let nameCell = row.insertCell(0);
            let juzCell = row.insertCell(1);
            let quartersStartCell = row.insertCell(2);
            let quartersEndCell = row.insertCell(3);
            let surahCell = row.insertCell(4);


            // Create a hidden input field for the student's name
            let nameInput = document.createElement("input");
            nameInput.type = "hidden";
            nameInput.name = "student_name";
            nameInput.value = studentNames[i];

            // Append the hidden input field to the form
            nameCell.appendChild(nameInput);

            // Set the innerText of the table cell to the student's name
            //nameCell.innerText = studentNames[i];

            // Create a span element to hold the student's name
            let nameSpan = document.createElement("span");
            nameSpan.innerText = studentNames[i];
            nameCell.appendChild(nameSpan);

            let juz = ["", 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30];

            let juzTab = document.createElement('select');
            juzTab.setAttribute('name', 'juz');
            juz.map((juz, i) => {
                let opt = document.createElement("option");
                opt.value = i; // the index
                opt.innerHTML = juz;
                juzTab.append(opt);
            });
            juzCell.appendChild(juzTab);

            let quarters = ["", 1, 2, 3, 4];
            let quartersStartTab = document.createElement('select');
            quartersStartTab.setAttribute('name', 'quarters');
            quarters.map((quarter, i) => {
                let opt = document.createElement("option");
                opt.value = i; // the index
                opt.innerHTML = quarter;
                quartersStartTab.append(opt);
            });
            quartersStartCell.appendChild(quartersStartTab);

            let quartersEndTab = document.createElement('select');
            quartersEndTab.setAttribute('name', 'quarters');
            quarters.map((quarter, i) => {
                let opt = document.createElement("option");
                opt.value = i; // the index
                opt.innerHTML = quarter;
                quartersEndTab.append(opt);
            });
            quartersEndCell.appendChild(quartersEndTab);


            let selectTag = document.createElement('select');
            selectTag.setAttribute('name', 'surah');
            surahNames.map((surah, i) => {
                let opt = document.createElement("option");
                opt.value = i; // the index
                opt.innerHTML = surah;
                selectTag.append(opt);
            });
            surahCell.appendChild(selectTag);


            let ayahStartCell = row.insertCell(5);
            let ayahEndCell = row.insertCell(6);
            let typeCell = row.insertCell(7);
            let mistakesCell = row.insertCell(8);
            let stuckCell = row.insertCell(9);

            let ayahStartInput = document.createElement("input");
            ayahStartInput.type = "number";
            ayahStartInput.name = "ayahStart";
            ayahStartCell.appendChild(ayahStartInput);

            let ayahEndInput = document.createElement("input");
            ayahEndInput.type = "number";
            ayahEndInput.name = "ayahEnd";
            ayahEndCell.appendChild(ayahEndInput);

            let types = ['Sabaq', 'Sabaq-Para', 'Daur'];
            let selectTag2 = document.createElement('select');
            selectTag2.setAttribute('id', 'mySelect');
            selectTag2.setAttribute('name', 'type');

            types.map((type, i) => {
                let opt = document.createElement("option");
                opt.value = i; // the index
                opt.innerHTML = type;
                selectTag2.append(opt);
            });
            typeCell.appendChild(selectTag2);


            if (type1 === 'Sabaq') {
                selectTag2.selectedIndex = 0;
                selectTag2.options[1].disabled = true;
                selectTag2.options[2].disabled = true;
            } else if (type1 === 'Sabaq-Para') {
                selectTag2.selectedIndex = 1;
                selectTag2.options[0].disabled = true;
                selectTag2.options[2].disabled = true;
            } else if (type1 === 'Daur') {
                selectTag2.selectedIndex = 2
                selectTag2.options[0].disabled = true;
                selectTag2.options[1].disabled = true;
            }
            ;


            let mistakeInput = document.createElement("input");
            mistakeInput.type = "number";
            mistakeInput.name = "mistake";
            mistakesCell.appendChild(mistakeInput);

            let stuckInput = document.createElement("input");
            stuckInput.type = "number";
            stuckInput.name = "stuck";
            stuckCell.appendChild(stuckInput);

            // Add additional cells if needed and set their values

            // For example:
            // let surahCell = row.insertCell(1);
            // surahCell.innerText = "Some Surah";
        }

        generatedTables[type1] = true;
    }

    function hifdhType(evt, type1) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");

        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";

        }

        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");

        }

        {% comment %}if (!evt.currentTarget.className.includes("active")) {

            evt.currentTarget.addEventListener('click', tableGenerator(type)); // this works but it duplicates the table
        }{% endcomment %}

        document.getElementById(type1).style.display = "block";
        evt.currentTarget.className += " active";

        tableGenerator(type1);
        // tabcontent.innerHTML = tableGenerator(type); // this works as well though it duplicates the table

    }


    // tabcontent.forEach(button => button.addEventListener('click', tableGenerator));
    // tabconent.innerHTML = tableGenerator();
    // document.getElementById("tableData").innerHTML = tableGenerator();


    // how to insert the tableGenerator function here?

    // q: how to insert the tableGenerator function here?
    // a: you can't. you need to call it from the onclick event of the button
    // q: how to call it from the onclick event of the button?
    // a: you need to add an event listener to the button
    // q: how to add an event listener to the button?
    // a: you need to get the button element and then call addEventListener on it
    // q: how to get the button element?
    // a: you can use document.getElementById('buttonId') or document.querySelector('#buttonId') or document.querySelector('.buttonClass')

    // q: but which button are you talking about?
    // a: the button that was clicked. you can get it from the event object that is passed to the function
    // q: where is that button in this code?
    // a: it's the evt.currentTarget

    // q: how to get the evt.currentTarget?
    // a: it's the first argument passed to the function
    // q: how to get the first argument passed to the function?
    // a: you can use the name of the argument, in this case evt
    // q: how to get the name of the argument?
    // a: you don't need to get the name of the argument, you just need to use it in the function

    // q: give me an example of that code
    // a: evt.currentTarget.addEventListener('click', tableGenerator)

    // q: and where should I put this evt.currentTarget.addEventListener('click', tableGenerator) code?
    // a: you can put it anywhere in the function, but it's better to put it at the end of the function
    // q: where at the end of the function?
    // a: after the for loop
    // q: which for loop? there are two for loops in this function
    // a: the first one
    // q: why the first one?
    // a: because the second one is inside the first one, so it will be executed multiple times
    // q: but you are wrong though, the second for loop is not inside the first one
    // a: yes it is, look at the code again
    // q: I looked at the code again and I am 100% sure it is not inside the first loop!
    // a: you are right, it's not inside the first loop, but it's inside the function, so it will be executed multiple times


    // Function to handle form submission
    function submitForm(event) {
        event.preventDefault(); // Prevent page reload

        if (event.target === form1) {
            var form = form1;
        } else if (event.target === form2) {
            var form = form2;
        } else {
            var form = form3;
        }

        var formData = new FormData(form);

        // console.log(document.getElementById("submission-form1"));
        // console.log(document.forms["submission-form1"].elements[1]);


        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'http://127.0.0.1:8000');
        xhr.onreadystatechange = function () {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                    // Request succeeded
                    console.log(xhr.responseText);
                } else {
                    // Request failed
                    console.error('Error: ' + xhr.status);
                }
            }
        };
        xhr.send(formData);
        if (event.target === form1) {
            document.getElementById("submission-form1").reset();
            // q: also write down an alert message here but in a modal
            // q: I want to use a modal for the alert message, how to do that?
            // a: you can use bootstrap modal
            // q: how to use bootstrap modal?
            // a: you can use the code from the bootstrap website
            // q: i want to build a modal from scratch, how to do that?
            // q: i don't want to use bootstrap modal, how to build a modal from scratch?
            // a: you can use the code from the w3schools website
            // q: give me the link to the w3schools website
            // a: https://www.w3schools.com/howto/howto_css_modals.asp

        } else if (event.target === form2) {
            document.getElementById("submission-form2").reset();
        } else {
            document.getElementById("submission-form3").reset();
        }

    }

    // Add event listener to the form submit event


    var form1 = document.getElementById('submission-form1');
    var form2 = document.getElementById('submission-form2');
    var form3 = document.getElementById('submission-form3');

    form1.addEventListener('submit', submitForm); //Modern browsers
    form2.addEventListener('submit', submitForm); //Modern browsers
    form3.addEventListener('submit', submitForm); //Modern browsers

    // q: how to get an element of the form like an element of the form1, I am specifically looking for getting the value of type and submitting that in the form as well, because as of now the form submitted doesn't have that field?
    // a: you can use document.getElementById('typeId') or document.querySelector('#typeId') or document.querySelector('.typeClass')
    // q: how do I use that?
    // a: you can use it in the submitForm function
    // q: how to use it in the submitForm function?
    // a: you can get the value of the type field and then add it to the formData
    // q: how to get the value of the type field?
    // a: you can use document.getElementById('typeId').value or document.querySelector('#typeId').value or document.querySelector('.typeClass').value

</script>

</body>
</html>